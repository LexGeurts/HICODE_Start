version: "3.1"

flows:
  - name: draft_email_flow
    priority: 1
    conditions:
      - active_flow: draft_email
      - not:
        - active_flow: read_email
        - active_flow: inbox_manage
    
    steps:
      - action: utter_start_drafting
      - action: action_collect_draft_info
      - condition:
          # If we have recipient
          - slot_was_set:
            - email_recipient: true
        - action: utter_ask_subject
      - condition:
          # If we have subject
          - slot_was_set:
            - email_subject: true
        - action: utter_ask_content
      - condition:
          # If we have content
          - slot_was_set:
            - email_content: true
        - action: action_draft_complete
      - action: utter_draft_options

triggers:
  - flow_id: draft_email_flow
    conditions:
      - intent: draft_email
